# Database 数据库



## Time Series Database (TSDB) 时序数据库

时序数据库（Time Series Database, TSDB）是一种专用数据库管理系统，设计用于高效存储、检索和分析按时间顺序排列的数据点，即时间序列数据。这类数据库主要用于处理和管理随着时间推移不断变化的数据，如传感器读数、服务器监控指标、金融市场的交易数据、应用性能指标等。

时序数据的特点通常包括：

1. **时间戳**：每个数据点都有一个明确的时间戳，表示数据被测量或生成的具体时刻。
2. **连续数据流**：数据按照时间顺序持续流入数据库。
3. **高写入吞吐量**：因为时序数据往往由大量源头快速生成，数据库需要能够处理高频率的写入操作。
4. **大量的数据点**：时序数据库经常要处理从数千到数十亿个数据点的情况，且数据规模随着时间增长。
5. **查询模式特定**：查询通常涉及时间范围内的聚合（如平均值、最大值、最小值）、趋势分析和异常检测。

时序数据库通过优化存储结构、索引机制和查询算法来满足这些特点带来的挑战，从而在大规模时间序列数据的场景下提供更佳的性能表现。相比于通用的关系型数据库或非关系型数据库，时序数据库更适合进行实时监控、历史数据分析以及未来预测等工作。

### 什么情况下需要时序数据库

- 抵达的数据几乎总是作为新条目被记录

- 数据通常按照时间顺序抵达

- 时间是一个主坐标轴（既可以是规则的时间间隔，也可以是不规则的）

### 为什么用时序数据库而不用一般数据库

- 规模： 时间序列数据累计速度非常快。

- 可用性：TSDB 通常还包括一些共通的对时间序列数据分析的功能和操作：数据保留策略、连续查询、灵活的时间聚合等。

### 似乎跟日志差不多，为什么要专门的时序数据库呢

虽然时序数据和日志数据在某种程度上有相似之处，即它们都可以包含时间戳并按时间顺序组织，但时序数据的特性和使用场景决定了其对数据库系统的要求与其他类型数据存储有所不同。以下是几个关键原因，解释了为何需要专门的时序数据库：

1. **数据写入频率高**：时序数据通常来自于传感器网络、监控系统、物联网设备等，这些系统会产生海量且频繁更新的数据。相较于传统数据库，时序数据库经过优化可以实现非常高的写入吞吐量，能够轻松应对每秒成千上万条数据的写入。
2. **数据压缩与存储效率**：由于时序数据具有很强的规律性（例如，相邻数据点可能变化不大），时序数据库会采用高效的压缩算法减少存储空间占用，尤其是在长期存储和归档时尤为重要。
3. **时间相关的查询优化**：时序数据库针对时间序列特有的查询模式进行了优化，例如区间查询（按时间段获取数据）、聚合查询（计算一段时间内数据的平均值、最大值、最小值等统计量）、及多维查询（按标签维度筛选数据）。
4. **预计算与缓存**：为了提高查询响应速度，时序数据库可以预先计算并存储常用的聚合结果或者利用缓存机制加速查询。
5. **时间窗口分析**：对于实时分析和告警系统，时序数据库可以很好地支持基于时间窗口的复杂分析，例如滑动窗口统计、滞后窗口比较等。
6. **大规模分布式处理**：时序数据库通常设计为可横向扩展的架构，能处理PB级甚至EB级的数据量，并确保在大数据量下的稳定性和性能。

因此，尽管日志数据也可以包含时间戳，但它通常侧重于事件记录和事后审计，而时序数据库则专注于高性能、高并发的实时/近实时数据捕获、存储和分析，尤其适用于需要实时监控和预测的应用场景。通过专门设计的时序数据库，企业能够更好地管理和利用随时间演变的数据资产，提升业务洞察力和决策效率。



> 参考文档：
>
> https://gist.github.com/baymaxium/a3d21bf2dd95ff1fe6d39c870455da47